var AOI = 
    /* color: #d63000 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-51.92002134176155, -20.867693855608483],
                  [-51.92002134176155, -21.076711250815702],
                  [-51.66733579488655, -21.076711250815702],
                  [-51.66733579488655, -20.867693855608483]]], null, false),
            {
              "system:index": "0"
            })]),
    Silviculture = /* color: #d63000 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-51.919489641815915, -21.070400386207087],
                  [-51.91914631906201, -21.07608680920586],
                  [-51.86970784249951, -21.075926631253044],
                  [-51.86884953561474, -21.062230778235893],
                  [-51.880780001312985, -21.055262228676774],
                  [-51.89142300668408, -21.049174493073686],
                  [-51.91408230844189, -21.06431326993577],
                  [-51.91365315499951, -21.065114220519593],
                  [-51.91459729257275, -21.065915166790838],
                  [-51.91528393808056, -21.065354504853783],
                  [-51.91837384286572, -21.06759713992241]]]),
            {
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-51.89446721090192, -21.03403128224377],
                  [-51.89060482992048, -21.0283432524203],
                  [-51.88047680868024, -21.0342716167512],
                  [-51.883395052088446, -21.04003952862024],
                  [-51.86648640645856, -21.04997263103133],
                  [-51.862709856165594, -21.04404489157035],
                  [-51.86785969747419, -21.04060028591779],
                  [-51.874897813929266, -21.032028479606254],
                  [-51.885884142054266, -21.02113276177408],
                  [-51.89257893575544, -21.026580720248674],
                  [-51.893866396082586, -21.025859678353108],
                  [-51.899617052210516, -21.030506331598072]]]),
            {
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-51.82752095358001, -21.001431265393105],
                  [-51.81516133443939, -21.009844581869093],
                  [-51.813702212735286, -21.0084824580534],
                  [-51.80958233968841, -21.011206693248024],
                  [-51.80168591634857, -21.001912039112916],
                  [-51.817993747159115, -20.989571690123878],
                  [-51.827692614956966, -21.000870360762605]]]),
            {
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-51.91164435698424, -20.972607294147554],
                  [-51.909756081837756, -20.96723751303933],
                  [-51.908554452199084, -20.967558102399774],
                  [-51.90984191252623, -20.97308816065749],
                  [-51.90314711882506, -20.97429032016416],
                  [-51.90271796538268, -20.972687438673304],
                  [-51.9011730129901, -20.972607294147554],
                  [-51.89396323515807, -20.94279055042917],
                  [-51.90743865324889, -20.938541982407138],
                  [-51.91542090727721, -20.971805846526593]]]),
            {
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-51.88027011563257, -20.933849466828253],
                  [-51.87168704678491, -20.933689136122553],
                  [-51.859670750398195, -20.93801800493194],
                  [-51.85795413662866, -20.935292435456148],
                  [-51.86636554409937, -20.925512042578937],
                  [-51.870657078523195, -20.928237790018102],
                  [-51.87271701504663, -20.923587955709245],
                  [-51.86756717373804, -20.914127502638163],
                  [-51.871172062654054, -20.9053078985724],
                  [-51.86979877163843, -20.897289626668368],
                  [-51.87271701504663, -20.892959581678944],
                  [-51.86722385098413, -20.88093102356683],
                  [-51.867395512361085, -20.87788363587991],
                  [-51.870657078523195, -20.878044026246894],
                  [-51.88679324795679, -20.919419016077246],
                  [-51.88679324795679, -20.931765154267616]]]),
            {
              "system:index": "4"
            })]);
            
            
var startDate = ee.Date.fromYMD(2020,1,15);
var endDate = ee.Date.fromYMD(2020,1,30);

var S2 = ee.ImageCollection("COPERNICUS/S2").filterDate(startDate,endDate).filterBounds(AOI)
var img = ee.Image(S2.median()).clip(AOI);

var viz = {min:0,max:3000,bands:"B4,B3,B2"};
Map.addLayer(img,viz,"True Color");

var evi = img.expression(
    '2.5 * ((NIR - RED) / (NIR + 6 * RED - 7.5 * BLUE + 1))', {
      'NIR': img.select('B8').divide(10000),
      'RED': img.select('B4').divide(10000),
      'BLUE': img.select('B2').divide(10000)
}).rename('EVI');

var eviParams = {min: -0.2, max: 0.8, palette: ['red', 'yellow', 'green']};
Map.addLayer(evi, eviParams, 'EVI');

var ndvi = img.expression(
    '((NIR - RED) / (NIR + RED))', {
      'NIR': img.select('B8').divide(10000),
      'RED': img.select('B4').divide(10000)
}).rename('NDVI');

var ndviParams = {min: -0.2, max: 0.8, palette: ['red', 'yellow', 'green']};
Map.addLayer(ndvi, ndviParams, 'NDVI');

var ndvi_silv_list = ndvi.reduceRegion(ee.Reducer.toList(), Silviculture, 120);
var evi_silv_list = evi.reduceRegion(ee.Reducer.toList(), Silviculture, 120);

var y = ee.Array(evi_silv_list.get('EVI'));
var x = ee.Array(ndvi_silv_list.get('NDVI'));

var chart = ui.Chart.array.values(y, 0, x)
      .setOptions({
      title: 'NDVI vs. EVI',
      hAxis: {'title': 'NDVI'},
      vAxis: {'title': 'EVI'},
      pointSize: 1,
});

print(chart);
          
